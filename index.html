<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Iliya Portfolio</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="assets/logo/mylogo3.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <header class="main-header">
    <div class="header-center">
      <div class="logo-title" onclick="toggleAdminLogin()">
        <img src="assets/logo/mylogo3.png" alt="Logo" class="logo-icon" />
        <h1 style="color: black;">Iliya Rad</h1>
      </div>
  <div class="language-switcher">
  <button class="language-btn" onclick="toggleLanguageMenu()">
    <i class="fas fa-globe"></i> <!-- ğŸ‘ˆ Ø¢ÛŒÚ©ÙˆÙ† Ú©Ø±Ù‡ Ø²Ù…ÛŒÙ† Ø¨Ø±Ú¯Ø´Øª -->
  </button>
  <ul id="language-menu" class="language-menu">
    <li onclick="setLanguage('en')">
      <img src="https://flagcdn.com/w20/gb.png" alt="EN" class="flag-icon" /> EN
    </li>
    <li onclick="setLanguage('fa')">
      <img src="https://flagcdn.com/w20/ir.png" alt="FA" class="flag-icon" /> FA
    </li>
    <li onclick="setLanguage('ar')">
      <img src="https://flagcdn.com/w20/sa.png" alt="AR" class="flag-icon" /> AR
    </li>
  </ul>
</div>
    </div>
  </header>

  <div class="container">
    <aside class="sidebar">
  <div class="sidebar-top">
    <div class="coin-wrapper">
      <div class="coin">
        <img src="assets/image/mypic.png" loading="lazy"  alt="Logo" class="coin-face front" />
        <img src="assets/logo/mylogo3.png" loading="lazy"  alt="Profile" class="coin-face back" />
      </div>
    </div>
    <button class="hamburger" onclick="toggleMenu()">â˜°</button>
  </div>

  <nav class="menu">
    <a href="#" onclick="showSection('about')" data-i18n="about">About Me</a>
    <a href="#" onclick="showSection('public-blog')" data-i18n="blog">Blog</a>
    <a href="#" onclick="showSection('portfolio')" data-i18n="portfolio">Portfolio</a>
    <a href="#" onclick="showSection('contact')" data-i18n="contact">Contact</a>
  </nav>
</aside>

    <main class="main-content">
     <section id="about" class="public-section hidden">
  <!-- ÙˆÛŒØ¯ÛŒÙˆ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ -->
  <video autoplay muted loop playsinline preload="none" class="about-bg-video">
    <source src="assets/backvid-about/backvid.mp4" type="video/mp4">
    Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² ÙˆÛŒØ¯ÛŒÙˆ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
  </video>
  <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ù…ØªÙ† -->
  <div class="about-content">
    <p id="about-fa">
      Ù…Ù† Ø§ÛŒÙ„ÛŒØ§ Ø±Ø§Ø¯ Ù‡Ø³ØªÙ…ØŒ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡â€ŒÛŒ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ Ø¨Ø§ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒ ÙˆÛŒÚ˜Ù‡ Ø¨Ù‡ Ø³Ø§Ø®Øª Ø±Ø§Ø¨Ø·â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±ÙˆØ§Ù†ØŒ Ø²ÛŒØ¨Ø§ Ùˆ Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§ ØªÙ…Ø§Ù… Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§. ØªÙ…Ø±Ú©Ø²Ù… Ø±ÙˆÛŒ Ø·Ø±Ø§Ø­ÛŒ Ú†Ù†Ø¯Ø²Ø¨Ø§Ù†Ù‡ Ùˆ ØªØ¬Ø±Ø¨Ù‡â€ŒÛŒ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨ÛŒâ€ŒÙ†Ù‚Øµ Ø§Ø³Øª ØªØ§ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø±ØŒ ØµØ±Ùâ€ŒÙ†Ø¸Ø± Ø§Ø² Ø²Ø¨Ø§Ù† ÛŒØ§ Ø¯Ø³ØªÚ¯Ø§Ù‡ØŒ ØªØ¬Ø±Ø¨Ù‡â€ŒØ§ÛŒ ÛŒÚ©Ø³Ø§Ù† Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯
    </p>
    <p id="about-en" class="hidden"></p>
    <p id="about-ar" class="hidden"></p>
  </div>
</section>
      <section id="blog" class="public-section hidden" data-i18n="blogContent"></section>
      <div id="public-blog" class="public-section hidden">
      <div id="public-blog-list" class="blog-list"></div>
      </div>
      <!-- <section id="portfolio" class="content-section" data-i18n="portfolioContent">Portfolio gallery will appear here.</section> -->
       <section id="portfolio" class="public-section portfolio-gallery hidden" data-i18n="portfolioContent">
  <div class="gallery-wrapper">
    <button class="nav-btn left" onclick="scrollGallery(-1)">&#8592;</button>
    <div class="gallery-track">
      <a href="assets/samples/sampel1/link/startbootstrap-creative-gh-pages/index.html" target="_blank"><img src="assets/samples/sampel1/img/Screenshot -ghoghnoos.png" alt="Site 1" /></a>
      <a href="https://example2.com" target="_blank"><img src="assets/samples/site2.png" alt="Site 2" /></a>
      <a href="https://example3.com" target="_blank"><img src="assets/samples/site3.png" alt="Site 3" /></a>
      
    </div>
    <button class="nav-btn right" onclick="scrollGallery(1)">&#8594;</button>
  </div>
</section>
      <section id="contact" class="public-section contact-layout hidden">
        <form class="contact-form" action="https://formsubmit.co/alirezamotieerad@gmail.com" method="POST">
        <input type="text" name="name" placeholder="Your Name" required />
        <input type="email" name="email" placeholder="Your Email" required />
        <textarea name="message" placeholder="Your Message" required></textarea>
        <button type="submit" data-i18n="send">Send</button>
         </form>
        <div class="contact-info">
          <div class="contact-info">
         <p data-i18n="phone"><a href="tel:+96879696086">+96879696086</a></p>
         <p data-i18n="email"><a href="mailto:alirezamotieerad@gmail.com">alirezamotieerad@gmail.com</a></p>
         </div>
          <div class="social-links">
            <a href="https://github.com/Iliya-Official" target="_blank"><i class="fab fa-github"></i></a>
            <a href="https://linkedin.com/in/iliya-rad-783b0b281" target="_blank"><i class="fab fa-linkedin"></i></a>
            <a href="https://wa.me/+96879696086" target="_blank"><i class="fab fa-whatsapp"></i></a>
          </div>
        </div>
      </section>

     <div id="admin-login" class="admin-login hidden">
  <h2>ğŸ” Admin Login</h2>
  <form id="admin-form">
    <input type="text" id="adminUser" placeholder="Username" autocomplete="off" />
    <input type="password" id="adminPass" placeholder="Password" autocomplete="new-password" />
    <button type="submit">ğŸ” Login</button>
  </form>
  <button id="admin-logout-btn" onclick="logoutAdmin()" class="hidden">ğŸšª Logout</button>
</div>

<section id="admin-panel" class="content-section hidden">
  <div class="admin-header">
    <div class="admin-tabs">
      <button onclick="showAdminTab('about-tab')">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ù†</button>
      <button onclick="showAdminTab('blog-tab')">Ø¨Ù„Ø§Ú¯</button>
      <button onclick="showAdminTab('portfolio-tab')">Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§</button>
      <button onclick="showAdminTab('contact-tab')">Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ù†</button>
      <button onclick="showAdminTab('settings-tab')">ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</button>
    </div>
    <button id="admin-logout-btn" onclick="logoutAdmin()">ğŸ”Œ Ø®Ø±ÙˆØ¬</button>
  </div>

  <div id="about-tab" class="admin-tab hidden">... ÙØ±Ù… Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ù† ...</div>

  <div id="blog-tab" class="admin-tab hidden">
    <h2>ğŸ“ Add New Blog Post</h2>
    <input type="text" id="blog-title" placeholder="Blog Title" />
    <select id="blog-category">
      <option value="general">General</option>
      <option value="tech">Tech</option>
      <option value="design">Design</option>
    </select>
    <textarea id="blog-body-fa" placeholder="Blog Content"></textarea>
    <button onclick="addBlog()">Add Blog</button>
    <div class="blog-filter">
      <button onclick="filterBlogs('all')">All</button>
      <button onclick="filterBlogs('tech')">Tech</button>
      <button onclick="filterBlogs('design')">Design</button>
      <button onclick="filterBlogs('general')">General</button>
    </div>
    <div id="blog-list" class="blog-list"></div>
  </div>

  <div id="portfolio-tab" class="admin-tab hidden">
    <h2>ğŸ¨ Add Portfolio Item</h2>
    <input type="text" id="portfolio-title" placeholder="Project Title" />
    <input type="text" id="portfolio-link" placeholder="Local path (e.g. templates/shop/index.html)" />
    <input type="url" id="portfolio-image" placeholder="Image URL" />
    <button onclick="addPortfolio()">Add Portfolio</button>
    <div id="portfolio-list" class="portfolio-list"></div>
  </div>

  <div id="contact-tab" class="admin-tab hidden">
    <h3>ğŸ“ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ØªÙ…Ø§Ø³</h3>
    <input type="text" id="admin-phone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†" />
    <input type="email" id="admin-email" placeholder="Ø§ÛŒÙ…ÛŒÙ„" />
    <input type="text" id="admin-social" placeholder="Ù„ÛŒÙ†Ú© Ø´Ø¨Ú©Ù‡ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ" />
    <button onclick="saveContactInfo()">Ø«Ø¨Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³</button>
  </div>

  <div id="settings-tab" class="admin-tab hidden">
    <h3>ğŸ” ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</h3>
    <input type="text" id="new-username" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¬Ø¯ÛŒØ¯" />
    <input type="password" id="new-password" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¬Ø¯ÛŒØ¯" />
    <button onclick="updateAdminCredentials()">Ø«Ø¨Øª ØªØºÛŒÛŒØ±Ø§Øª</button>
  </div>
</section>
  <!-- <div id="portfolio-manager" class="portfolio-manager content-section hidden">
  <h2>ğŸ¨ Add Portfolio Item</h2>
  <input type="text" id="portfolio-title" placeholder="Project Title" />
<input type="text" id="portfolio-link" placeholder="Local path (e.g. templates/shop/index.html)" />  <input type="url" id="portfolio-image" placeholder="Image URL" />
  <button onclick="addPortfolio()">Add Portfolio</button>

  <div id="portfolio-list" class="portfolio-list"></div>
</div>

<div id="blog-manager" class="blog-manager content-section hidden">
  <h2>ğŸ“ Add New Blog Post</h2>
  <input type="text" id="blog-title" placeholder="Blog Title" />
  <select id="blog-category">
  <option value="general">General</option>
  <option value="tech">Tech</option>
  <option value="design">Design</option>
</select> -->

  <!-- <textarea id="blog-body" placeholder="Blog Content"></textarea>
  <button onclick="addBlog()">Add Blog</button> -->

  <!-- <div class="blog-filter">
  <button onclick="filterBlogs('all')">All</button>
  <button onclick="filterBlogs('tech')">Tech</button>
  <button onclick="filterBlogs('design')">Design</button>
  <button onclick="filterBlogs('general')">General</button> 
</div> -->

  <div id="blog-list" class="blog-list"></div>
 </div>

      <!-- âœ… ÙÙˆØªØ± Ø¯Ø§Ø®Ù„ main-content -->
      <footer class="site-footer">
         <p>Â© 2025 Iliya Rad. All rights reserved.</p>
      </footer>
    </main>
  </div>

  <script>
    const translations = {
  en: {
    about: "About Me",
    blog: "Blog",
    portfolio: "Portfolio",
    contact: "Contact",
    send: "Send",
    phone: 'Phone: <a href="tel:+96879696086">+96879696086</a>',
    email: 'Email: <a href="mailto:alirezamotieerad@gmail.com">alirezamotieerad@gmail.com</a>'

  },
  fa: {
    about: "Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ù†",
    blog: "Ø¨Ù„Ø§Ú¯",
    portfolio: "Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§",
    contact: "Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ù†",
    send: "Ø§Ø±Ø³Ø§Ù„",
    phone: 'ØªÙ„ÙÙ†: <a href="tel:+96879696086">+96879696086</a>',
    email: 'Ø§ÛŒÙ…ÛŒÙ„: <a href="mailto:alirezamotieerad@gmail.com">alirezamotieerad@gmail.com</a>'

  },
  ar: {
    about: "Ù…Ù† Ø£Ù†Ø§",
    blog: "Ø§Ù„Ù…Ø¯ÙˆÙ†Ø©",
    portfolio: "Ø§Ù„Ø£Ø¹Ù…Ø§Ù„",
    contact: "Ø§ØªØµÙ„ Ø¨ÙŠ",
    send: "Ø¥Ø±Ø³Ø§Ù„",
    phone: 'Ø§Ù„Ù‡Ø§ØªÙ: <a href="tel:+96879696086">+96879696086</a>',
    email: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: <a href="mailto:alirezamotieerad@gmail.com">alirezamotieerad@gmail.com</a>'
  }
};

function applyTranslations(lang) {
  const htmlKeys = ['phone', 'email']; // ÙÙ‚Ø· Ø§ÛŒÙ†Ø§ Ø¨Ø§ innerHTML

  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    const value = translations[lang]?.[key];

    if (value) {
      if (htmlKeys.includes(key)) {
        el.innerHTML = value;
      } else {
        el.textContent = value;
      }
    }
  });
}
    function toggleAdminLogin() {
  const loginBox = document.getElementById('admin-login');
  if (loginBox) {
    loginBox.classList.toggle('hidden');
  }
}
  let adminUsername = 'admin';
  let adminPassword = 'admin777';

function loginAdmin() {
  const username = document.getElementById('adminUser').value.trim();
  const password = document.getElementById('adminPass').value.trim();

  const savedUser = localStorage.getItem('adminUser') || 'admin';
  const savedPass = localStorage.getItem('adminPass') || 'admin777';

  if (username === savedUser && password === savedPass) {
    alert('âœ… Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!');
    document.getElementById('admin-login').classList.add('hidden');
    document.getElementById('admin-panel').classList.remove('hidden');
    document.getElementById('admin-logout-btn').classList.remove('hidden');
    showAdminTab('about-tab');

    // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
   loadBlogAdmin?.();
   loadPortfolioAdmin?.();
  } else {
    alert('âŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ±ÙˆØ¯ Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª.');
  }
}

function logoutAdmin() {
  document.getElementById('admin-login').classList.remove('hidden');
  document.getElementById('admin-panel').classList.add('hidden');
  document.getElementById('admin-logout-btn').classList.add('hidden');
  document.querySelectorAll('.admin-tab').forEach(tab => tab.classList.remove('active'));
  showSection('about');
}

function updateAdminCredentials() {
  const newUser = document.getElementById('new-username').value.trim();
  const newPass = document.getElementById('new-password').value.trim();
  if (!newUser || !newPass) return alert('Please fill in both fields.');
  adminUsername = newUser;
  adminPassword = newPass;
  alert('âœ… Admin credentials updated!');
  document.getElementById('new-username').value = '';
  document.getElementById('new-password').value = '';
}

function showAdminTab(id) {
  document.querySelectorAll('.admin-tab').forEach(tab => {
    tab.classList.remove('active');
  });
  const target = document.getElementById(id);
  if (target) {
    target.classList.add('active');
  }
}

function showSection(id) {
  document.querySelectorAll('.public-section').forEach(sec => {
    sec.classList.add('hidden');
    sec.style.display = 'none';
  });
  const target = document.getElementById(id);
  if (target) {
    target.classList.remove('hidden');
    target.style.display = 'flex';
    target.scrollTop = 0;
  }
}

function saveBlogsToStorage() {
  const blogList = document.getElementById('blog-list');
  const blogs = Array.from(blogList.children).map(article => ({
    title: article.querySelector('h3').textContent,
    body: article.querySelector('p').textContent,
    category: article.getAttribute('data-category')
  }));
  localStorage.setItem('blogs', JSON.stringify(blogs));
}

function loadBlogsFromStorage() {
  const saved = localStorage.getItem('blogs');
  if (!saved) return;

  const blogList = document.getElementById('blog-list');
  blogList.innerHTML = '';
  const blogs = JSON.parse(saved);
  blogs.forEach(({ title, body, category }) => {
    const article = document.createElement('article');
    article.setAttribute('data-category', category);
    article.innerHTML = `
      <h3>${title}</h3>
      <p>${body}</p>
      <button onclick="this.parentElement.remove(); saveBlogsToStorage()">ğŸ—‘ï¸ Delete</button>
    `;
    blogList.appendChild(article);
  });
}

function loadPublicBlogs() {
  const saved = localStorage.getItem('blogs');
  if (!saved) return;

  const lang = document.documentElement.lang || 'en';
  const blogList = document.getElementById('public-blog-list');
  blogList.innerHTML = '';

  const blogs = JSON.parse(saved);
  blogs.forEach(blog => {
    if (!blog || typeof blog.title !== 'object' || typeof blog.body !== 'object') return;

    const safeTitle = blog.title[lang] || blog.title.fa || 'Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†';
    const safeBody = blog.body[lang] || blog.body.fa || '';

    const article = document.createElement('article');
    article.setAttribute('data-category', blog.category || '');
    article.innerHTML = `<h3>${String(safeTitle)}</h3><p>${String(safeBody)}</p>`;
    blogList.appendChild(article);
  });
}

function filterBlogs(cat) {
  document.querySelectorAll('#blog-list article').forEach(article => {
    article.style.display = article.getAttribute('data-category') === cat || cat === 'all' ? 'block' : 'none';
  });
  loadBlogsFromStorage();
}

async function translateText(text, targetLang) {
  try {
    const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=fa|${targetLang}&de=your@email.com`);
    if (!response.ok) return text;
    const data = await response.json();
    return data.responseData?.translatedText || text;
  } catch (error) {
    console.error("Translation error:", error);
    return text;
  }
}

async function translateLongText(text, targetLang) {
  const sentences = text.split(/(?<=[.ØŸ!])\s+/);
  const translatedSentences = [];
  for (const sentence of sentences) {
    const translated = await translateText(sentence, targetLang);
    translatedSentences.push(translated);
  }
  return translatedSentences.join(' ');
}

function cleanText(t) {
  return t.replace(/^[\uFEFF\u200E\u200F\u202A-\u202E]+/, '').trim();
}

function decodeEntities(str) {
  if (!str) return ''; // Ø§Ú¯Ø± Ø®Ø§Ù„ÛŒ Ø¨ÙˆØ¯ØŒ Ø¨Ø±Ú¯Ø±Ø¯ÙˆÙ† Ø±Ø´ØªÙ‡ Ø®Ø§Ù„ÛŒ
  const txt = document.createElement("textarea");
  txt.innerHTML = str;
  return txt.value;
}

async function translateAboutSection() {
  const faText = document.getElementById('about-fa').textContent.trim();
  console.log("FA:", faText);

  const enRaw = await translateText(faText, 'en');
  const arRaw = await translateText(faText, 'ar');
  console.log("EN raw:", enRaw);
  console.log("AR raw:", arRaw);
console.log("EN raw:", enRaw);
  const enText = enRaw ? decodeEntities(enRaw) : '';
  const arText = arRaw ? decodeEntities(arRaw) : '';
  console.log("EN decoded:", enText);
  console.log("AR decoded:", arText);

  document.getElementById('about-en').textContent = enText;
  document.getElementById('about-ar').textContent = arText;
}

async function addBlog() {
  const faTitle = document.getElementById('blog-title').value.trim();
  const faBody = document.getElementById('blog-body-fa').value.trim();
  const category = document.getElementById('blog-category').value;

  const enTitle = await translateText(faTitle, 'en');
  const arTitle = await translateText(faTitle, 'ar');
  const enBody = await translateLongText(faBody, 'en');
  const arBody = await translateLongText(faBody, 'ar');

  const blog = {
    title: { fa: faTitle, en: enTitle, ar: arTitle },
    body: { fa: faBody, en: enBody, ar: arBody },
    category
  };

  const saved = localStorage.getItem('blogs');
  const blogs = saved ? JSON.parse(saved) : [];
  blogs.push(blog);
  localStorage.setItem('blogs', JSON.stringify(blogs));

  loadBlogsFromStorage();
  loadPublicBlogs();
  showSection('public-blog');
}

function loadPortfolio() {
  const saved = localStorage.getItem('portfolio');
  if (!saved) return;

  const galleryTrack = document.querySelector('.gallery-track');
  if (!galleryTrack) return;

  galleryTrack.innerHTML = '';
  const items = JSON.parse(saved);
  items.forEach(({ title, link, image }) => {
    const a = document.createElement('a');
    a.href = link;
    a.target = '_blank';
    a.innerHTML = `<img src="${image}" alt="${title}" />`;
    galleryTrack.appendChild(a);
  });
}

function addPortfolio() {
  const title = document.getElementById('portfolio-title').value.trim();
  const link = document.getElementById('portfolio-link').value.trim();
  const image = document.getElementById('portfolio-image').value.trim();

  if (!title || !link || !image) {
    alert('Please fill in all fields.');
    return;
  }

  const item = { title, link, image };
  const saved = localStorage.getItem('portfolio');
  const portfolio = saved ? JSON.parse(saved) : [];
  portfolio.push(item);
  localStorage.setItem('portfolio', JSON.stringify(portfolio));

  loadPortfolio();

  document.getElementById('portfolio-title').value = '';
  document.getElementById('portfolio-link').value = '';
  document.getElementById('portfolio-image').value = '';
}

function loadPortfolioAdmin() {
  const saved = localStorage.getItem('portfolio');
  const portfolio = saved ? JSON.parse(saved) : [];
  const list = document.getElementById('portfolio-list');
  list.innerHTML = '';

  portfolio.forEach((item, index) => {
    const div = document.createElement('div');
    div.className = 'portfolio-admin-item';
    div.innerHTML = `
      <img src="${item.image}" alt="${item.title}" />
      <div class="portfolio-admin-info">
        <strong>${item.title}</strong>
        <button onclick="editPortfolio(${index})">âœï¸ Edit</button>
        <button onclick="deletePortfolio(${index})">ğŸ—‘ï¸ Delete</button>
      </div>
    `;
    list.appendChild(div);
  });
}

function deletePortfolio(index) {
  const saved = localStorage.getItem('portfolio');
  const portfolio = saved ? JSON.parse(saved) : [];
  portfolio.splice(index, 1);
  localStorage.setItem('portfolio', JSON.stringify(portfolio));
  loadPortfolio();
  loadPortfolioAdmin();
}

function editPortfolio(index) {
  const saved = localStorage.getItem('portfolio');
  const portfolio = saved ? JSON.parse(saved) : [];
  const item = portfolio[index];

  document.getElementById('portfolio-title').value = item.title;
  document.getElementById('portfolio-link').value = item.link;
  document.getElementById('portfolio-image').value = item.image;

  portfolio.splice(index, 1);
  localStorage.setItem('portfolio', JSON.stringify(portfolio));
  loadPortfolio();
  loadPortfolioAdmin();
}

function openPreview(path) {
  const viewer = document.getElementById('portfolio-viewer');
  viewer.innerHTML = `<iframe src="${path}" frameborder="0"></iframe>`;
  viewer.style.display = 'block';
}

async function saveAbout(faText) {
  const enText = await translateText(faText, 'en');
  const arText = await translateText(faText, 'ar');

  const aboutData = {
    fa: faText,
    en: enText,
    ar: arText
  };

  localStorage.setItem('aboutSection', JSON.stringify(aboutData));
  loadAbout(); // Ø¨Ø¹Ø¯ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù„ÙˆØ¯ Ú©Ù†
}

function loadAbout() {
  const saved = localStorage.getItem('aboutSection');
  if (!saved) return;

  const about = JSON.parse(saved);
  document.getElementById('about-fa').textContent = about.fa;
  document.getElementById('about-en').textContent = about.en;
  document.getElementById('about-ar').textContent = about.ar;
}

function toggleLanguageMenu() {
  const menu = document.getElementById('language-menu');
  menu.classList.toggle('show');
}

function setLanguage(lang) {
  document.documentElement.lang = lang;
  document.documentElement.dir = lang === 'fa' || lang === 'ar' ? 'rtl' : 'ltr';

  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
  localStorage.setItem('selectedLanguage', lang);
  loadPublicBlogs();
  showAboutByLang(lang);
  applyTranslations(lang)

}

function toggleMenu() {
  const menu = document.querySelector('.menu');
  menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
}

function scrollGallery(direction) {
  const track = document.querySelector('.gallery-track');
  const scrollAmount = 300;
  track.scrollBy({ left: direction * scrollAmount, behavior: 'smooth' });
}

let startX = 0;
document.querySelector('.gallery-track').addEventListener('touchstart', e => {
  startX = e.touches[0].clientX;
});

document.querySelector('.gallery-track').addEventListener('touchend', e => {
  const endX = e.changedTouches[0].clientX;
  const delta = startX - endX;
  if (Math.abs(delta) > 50) {
    scrollGallery(delta > 0 ? 1 : -1);
  }
}
);

function showAboutByLang(lang) {
  document.getElementById('about-fa').classList.add('hidden');
  document.getElementById('about-en').classList.add('hidden');
  document.getElementById('about-ar').classList.add('hidden');

  if (lang === 'fa') {
    document.getElementById('about-fa').classList.remove('hidden');
  } else if (lang === 'en') {
    document.getElementById('about-en').classList.remove('hidden');
  } else if (lang === 'ar') {
    document.getElementById('about-ar').classList.remove('hidden');
  }
}

async function saveAbout(faText) {
  const enText = await translateText(faText.trim(), 'en');
  const arText = await translateText(faText.trim(), 'ar');

  const aboutData = { fa: faText.trim(), en: enText.trim(), ar: arText.trim() };
  localStorage.setItem('aboutSection', JSON.stringify(aboutData));
}

function loadAbout() {
  const saved = localStorage.getItem('aboutSection');
  if (!saved) return;
  const about = JSON.parse(saved);

  document.getElementById('about-fa').textContent = about.fa;
  document.getElementById('about-en').textContent = about.en;
  document.getElementById('about-ar').textContent = about.ar;
}

window.addEventListener('DOMContentLoaded', () => {
  
translateAboutSection().then(() => {
    showAboutByLang('en');
  });


  // Ø¨Ø³ØªÙ† Ù…Ù†ÙˆÛŒ Ø²Ø¨Ø§Ù† Ø¯Ø± Ø´Ø±ÙˆØ¹
  document.getElementById('language-menu')?.classList.remove('show');

  // ØªÙ†Ø¸ÛŒÙ… Ø²Ø¨Ø§Ù† Ø°Ø®ÛŒØ±Ù‡â€ŒØ´Ø¯Ù‡
  const lang = localStorage.getItem('selectedLanguage') || 'en';
  setLanguage(lang); // Ø¨Ø§ÛŒØ¯ Ù‚Ø¨Ù„ Ø§Ø² loadPublicBlogs Ø¨Ø§Ø´Ù‡
  // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¨Ù„Ø§Ú¯â€ŒÙ‡Ø§
  loadBlogsFromStorage();
  loadPublicBlogs();

  // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ù…ÙˆÙ†Ù‡â€ŒÚ©Ø§Ø±Ù‡Ø§
  loadPortfolio();
  loadPortfolioAdmin();

  // Ø§ØªØµØ§Ù„ ÙØ±Ù… Ù„Ø§Ú¯ÛŒÙ†
  const loginForm = document.getElementById('admin-form');
  if (loginForm) {
    loginForm.addEventListener('submit', function (e) {
      e.preventDefault();
      loginAdmin();
      showSection('admin-panel');
    });
  }

  // Ù†Ù…Ø§ÛŒØ´ Ø¨Ø®Ø´ Ø§ÙˆÙ„ÛŒÙ‡
  showSection('about');
});
 
  </script>
</body>

</html>
